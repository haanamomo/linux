<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Linux Manual</title>
    <link rel="stylesheet" type="text/css" href="https://gist.githubusercontent.com/haanamomo/8faf4c075a493855e208e2ad40e12134/raw/htmlBlogs.css">
</head>

<body>

    <div class="sidebar">
        <h2 class="blog-title">Menu</h2>
    </div>
    <div class="container">
        <header>
            <h1>Linux Manual</h1>
        </header>
        <div id="blogs">
        </div>
        <footer>
            <div class="footer-column">

                <ul>
                    <li><a href="https://haanamomo.github.io/linux/">Linux Manual</a></li>
                    <li><a href="https://haanamomo.github.io/windows/">Windows Manual</a></li>
                    <li><a href="https://haanamomo.github.io/mac/">Mac Manual</a></li>
 
                </ul>
            </div>
            <div  class="footer-column">
                <ul>
                    <li><a href="https://haanamomo.github.io/tools/">Tools</a></li>
                <li><a href="https://haanamomo.com">Others</a></li>
                </ul>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        const blogContainer = document.getElementById('blogs');

        fetch('blogs.md')
            .then(response => response.text())
            .then(blogs => {
                const blogHtml = blogs.split(/^\#\# /gm).map(blog => {
                    console.log(blog)
                    if (blog.trim()) {
                        const content = marked.parse('## ' + blog);
                        return `<article>${content}</article>`;
                    }
                }).join('');

                blogContainer.innerHTML = blogHtml;
                const articles = blogContainer.querySelectorAll('article');

                // Create a menu item for each article
                const menu = document.querySelector('.sidebar');
                articles.forEach((article, index) => {
                    article.id = `blog${index + 1}`;
                    const menuItem = document.createElement('a');
                    menuItem.href = `#${article.id}`;
                    menuItem.textContent = article.querySelector('h2').textContent;
                    menuItem.classList.add('blog-link');

                    // Add the menu item to the menu container
                    menu.appendChild(menuItem);

                    // Set the first menu item as active by default
                    if (index === 0) {
                        menuItem.classList.add('active');
                    } else {
                        article.classList.add('hidden');
                    }

                });

                const blogLinks = document.querySelectorAll('.blog-link');

                blogLinks.forEach((link) => {
                    link.addEventListener('click', (event) => {
                        event.preventDefault();
                        const articleId = link.getAttribute('href');
                        const activeLink = document.querySelector('.blog-link.active');
                        activeLink.classList.remove('active');
                        link.classList.add('active');
                        const activeArticle = document.querySelector('#blogs article:not(.hidden)');
                        activeArticle.classList.add('hidden');
                        const articleToShow = document.querySelector(articleId);
                        articleToShow.classList.remove('hidden');
                    });
                });

            });

    </script>
</body>

</html>
